<?xml  version="1.0"?>  
<odoo>   
	<record	id="sale_order_to_approve"	model="ir.ui.view">	
		<field	name="name">Orders to Approve : Credit Limit Issues</field>	
		<field	name="model">sale.order</field>	
		<field	name="arch"	type="xml">	
				<tree>
				    <field name="message_needaction" invisible="1"/>
				    <field name="name" string="Order Number"/>
				    <field name="date_order"/>
				    <field name="partner_id"/>
				    <field name="user_id"/>
				    <field name="amount_total" sum="Total Tax Included" widget="monetary" eval=""></field>
				    <field name="customer_balance" string="Total Debt" widget="monetary"/>
				    <field name="credit_limit" string="Credit Limit" widget="monetary" />
				    <field name="currency_id" invisible="1"/>
				    <field name="invoice_status"  invisible="1"/>
				    <field name="state" invisible="1"/>
				</tree>	
		</field>	
	</record>

	<record	id="view_customer_over_limit"	model="ir.ui.view">	
		<field	name="name">Customers over Credit Limit</field>	
		<field	name="model">res.partner</field>	
		<field	name="arch"	type="xml">	
				<tree>
		  		    <field name="display_name" string="Name"/>
				    <field name="function" invisible="1"/>
				    <field name="phone"/>
				    <field name="email"/>				
				    <field name="my_credit_limit"  string="Credit Limit"  widget="monetary" ></field>
				    <field name="credit" string="Invoiced Debt" sum="Total Tax Included" widget="monetary"></field>
				    <field name="over_limit" string="Over Limit" widget="monetary"></field>
				    <field name="user_id" invisible="1"/>
				    <field name="is_company" invisible="1"/>
				    <field name="country_id" invisible="1"/>
				    <field name="parent_id" invisible="1"/>
				    <field name="active" invisible="1"/>
				</tree>	
		</field>	
	</record>

	<record	id="view_customer_without_limit"	model="ir.ui.view">	
		<field	name="name">Customers without Credit Limit</field>	
		<field	name="model">res.partner</field>	
		<field	name="arch"	type="xml">	
				<tree>
		  		    <field name="display_name" string="Name"/>
				    <field name="function" invisible="1"/>
				    <field name="phone"/>
				    <field name="email"/>				
				    <field name="credit" sum="Total Tax Included" widget="monetary"></field>
				    <field name="user_id" invisible="1"/>
				    <field name="is_company" invisible="1"/>
				    <field name="country_id" invisible="1"/>
				    <field name="parent_id" invisible="1"/>
				    <field name="active" invisible="1"/>
				</tree>	
		</field>	
	</record>

	<record id="credit_limit_settings" model="ir.ui.view">
	    <field name="name">Credit Limit Settings</field>
	    <field name="model">credit.limit.config</field>
	    <field name="arch" type="xml">
		<form string="Credit Limit Settings" class="oe_form_configuration">
		    <group string="Credit Limit Settings">
		        <label for="id" string="Sale Orders"/>
		        <div>
		            <div>
		                <label for="default_my_credit_limit"/>
		                <field name="default_my_credit_limit"/>
		            </div>

		            <div>
		                <field name="include_not_invoiced"/>
		                <label for="include_not_invoiced"/>
		            </div>

		            <div>
		                <field name="force_limit_fresh_orders"/>
		                <label for="force_limit_fresh_orders"/>
		            </div>
		        </div>
		    </group>
            <footer>
                <button string="Apply" type="object"
                    name="execute" class="oe_highlight"/>
                or
                <button string="Cancel" type="object"
                    name="cancel" class="oe_link"/>
            </footer>
		</form>
	    </field>
	</record>

    <act_window  id="action_list_sale_to_approve"  
        name="Orders to Approve : Credit Limit Issues"  
        res_model="sale.order"
	view_id="sale_order_to_approve"
        view_mode="tree,form" 
	domain="[('need_approval', '=', True),'|',('state', '=','draft' ),('state', '=','sent' )]"/> 

    <act_window  id="action_list_customer_over_credit_limit"  
        name="Customers over Credit Limit"  
        res_model="res.partner"
	view_id="view_customer_over_limit"
        view_mode="tree,form"
	domain="[('over_limit','>',0),('check_credit_limit','=',True)]"
	/> 
 
    <act_window  id="action_list_customer_without_limit"  
        name="Customers without Credit Limit"  
        res_model="res.partner"
	view_id="view_customer_without_limit"
        view_mode="tree,form"
	domain="[('check_credit_limit', '=', False)]"
	/> 


    <act_window  id="action_list_credit_limit_settings"  
        name="Credit Limit Settings"  
        res_model="credit.limit.config"
	view_id="credit_limit_settings"
        view_mode="form"
	target="inline"
	/> 



    <menuitem  id="my_credit_limit_menu"  
        name="Credit Limit"  
        parent="sale.sale_menu_root"
	groups="sales_team.group_sale_manager"
        sequence="3" />

    <menuitem  id="menu_list_sale_to_approve"  
        name="Sale Orders to Approve"  
        action="action_list_sale_to_approve" 
        parent="my_credit_limit_menu"
	groups="sales_team.group_sale_manager"
        sequence="1" />


    <menuitem  id="menu_credit_limit_customers_over"  
        name="Customers over Limit"
        action="action_list_customer_over_credit_limit" 
        parent="my_credit_limit_menu"
	groups="sales_team.group_sale_manager"
        sequence="2" />

    <menuitem  id="menu_credit_limit_customers_without"  
        name="Customers without Limit"
        action="action_list_customer_without_limit" 
        parent="my_credit_limit_menu"
	groups="sales_team.group_sale_manager"
        sequence="3" />


    <menuitem  id="menu_credit_limit_config"  
        name="Credit Limit Settings"  
        action="action_list_credit_limit_settings" 
        parent="my_credit_limit_menu"
	groups="sales_team.group_sale_manager"
        sequence="55" />

</odoo> 
